<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Axios源码解读 | 忆海笔记</title>
    <meta name="description" content="Web Application Engineer / Frontend Engineer">
    <link rel="stylesheet" href="/assets/style.94f685fe.css">
    <link rel="modulepreload" href="/assets/app.31720a63.js">
    <link rel="modulepreload" href="/assets/手撕源码_Axios_Axios源码解读.md.52effe3d.lean.js">
    
    <link rel="icon" href="/icon/favicon.ico">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-0fff2b0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c58c7329></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c58c7329> Skip to content </a><!--]--><!----><header class="VPNav" data-v-0fff2b0b data-v-ff06eb6e><div class="VPNavBar has-sidebar" data-v-ff06eb6e data-v-d864acd5><div class="container" data-v-d864acd5><div class="VPNavBarTitle has-sidebar" data-v-d864acd5 data-v-28292334><a class="title" href="/" data-v-28292334><!--[--><!--]--><!----><!--[-->忆海笔记<!--]--><!--[--><!--]--></a></div><div class="content" data-v-d864acd5><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-d864acd5 data-v-00293389><span id="main-nav-aria-label" class="visually-hidden" data-v-00293389>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-00293389 data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1732edeb><span class="text" data-v-1732edeb><!----> 📂  NodeJs <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1732edeb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><div class="items" data-v-e175fc43><!--[--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/NodeJs/01.Koa/01.koa%E6%BA%90%E7%A0%81%EF%BC%9A%E6%A0%B8%E5%BF%83%E5%BA%93%E5%8E%9F%E7%90%86.html" data-v-8192f772 data-v-329a908c><!--[-->📂  01.Koa<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/NodeJs/02.%E5%91%BD%E4%BB%A4%E8%A1%8C/01.%E7%8E%A9%E8%BD%ACNodejs%E5%91%BD%E4%BB%A4%E8%A1%8C.html" data-v-8192f772 data-v-329a908c><!--[-->📂  02.命令行<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/NodeJs/03.%E6%B5%8B%E8%AF%95/01.Jest%E5%AE%9E%E6%88%98%EF%BC%9A%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E4%B8%8E%E6%9C%8D%E5%8A%A1%E6%B5%8B%E8%AF%95.html" data-v-8192f772 data-v-329a908c><!--[-->📂  03.测试<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/NodeJs/04.Serverless/01.%E5%9F%BA%E4%BA%8E%E5%AE%9E%E6%97%B6%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%9C%A8%E7%BA%BF%E5%AF%B9%E6%88%98%E4%BA%94%E5%AD%90%E6%A3%8B%E5%B0%8F%E6%B8%B8%E6%88%8F.html" data-v-8192f772 data-v-329a908c><!--[-->📂  04.Serverless<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/NodeJs/05.%E6%9B%B4%E5%A4%9A/01.NodeJS%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E5%8C%BA%E5%9D%97%E9%93%BE.html" data-v-8192f772 data-v-329a908c><!--[-->📂  05.更多<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/NodeJs/NestJs/undefined.html" data-v-8192f772 data-v-329a908c><!--[-->📂  NestJs<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/NodeJs/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%85%B3%E9%94%AE%E8%AF%8D.html" data-v-8192f772 data-v-329a908c><!--[-->📂  数据库<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-00293389 data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1732edeb><span class="text" data-v-1732edeb><!----> 📂  WebRTC <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1732edeb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><div class="items" data-v-e175fc43><!--[--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/WebRTC/sdp.html" data-v-8192f772 data-v-329a908c><!--[-->✏️  sdp<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-00293389 data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1732edeb><span class="text" data-v-1732edeb><!----> 📂  前端基础 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1732edeb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><div class="items" data-v-e175fc43><!--[--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1.html" data-v-8192f772 data-v-329a908c><!--[-->✏️  面向对象<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/CSS/CSS3%E6%96%B0%E7%89%B9%E6%80%A7.html" data-v-8192f772 data-v-329a908c><!--[-->📂  CSS<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/Canvas/Echart.html" data-v-8192f772 data-v-329a908c><!--[-->📂  Canvas<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/ES6/02.ES6%E9%87%8D%E9%9A%BE%E7%82%B9%E6%95%B4%E7%90%86.html" data-v-8192f772 data-v-329a908c><!--[-->📂  ES6<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/HTML/HTML.html" data-v-8192f772 data-v-329a908c><!--[-->📂  HTML<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/HTTP/HTTPS%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B.html" data-v-8192f772 data-v-329a908c><!--[-->📂  HTTP<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/JavaScript/AJAX.html" data-v-8192f772 data-v-329a908c><!--[-->📂  JavaScript<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/TypeScript/Typescript%E5%9F%BA%E7%A1%80.html" data-v-8192f772 data-v-329a908c><!--[-->📂  TypeScript<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/V8%E5%BC%95%E6%93%8E/JavaScript%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0.html" data-v-8192f772 data-v-329a908c><!--[-->📂  V8引擎<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/Websocket/WebSocket%E5%8D%8F%E8%AE%AE.html" data-v-8192f772 data-v-329a908c><!--[-->📂  Websocket<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/%E6%B5%8F%E8%A7%88%E5%99%A8/%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6.html" data-v-8192f772 data-v-329a908c><!--[-->📂  浏览器<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/DNS.html" data-v-8192f772 data-v-329a908c><!--[-->📂  计算机网络<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-00293389 data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1732edeb><span class="text" data-v-1732edeb><!----> 📂  前端架构 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1732edeb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><div class="items" data-v-e175fc43><!--[--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7.html" data-v-8192f772 data-v-329a908c><!--[-->✏️  前端监控<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83.html" data-v-8192f772 data-v-329a908c><!--[-->✏️  开发规范<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/Git%E7%AC%94%E8%AE%B0%E6%89%8B%E5%86%8C/01.%E6%A0%87%E7%AD%BE%E5%BA%94%E7%94%A8%E5%92%8C%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86.html" data-v-8192f772 data-v-329a908c><!--[-->📂  Git笔记手册<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/AST%E6%8A%BD%E8%B1%A1%E8%AF%AD%E6%B3%95%E6%A0%91.html" data-v-8192f772 data-v-329a908c><!--[-->📂  前端工程化<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/%E5%89%8D%E7%AB%AF%E9%83%A8%E7%BD%B2/Docker%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.html" data-v-8192f772 data-v-329a908c><!--[-->📂  前端部署<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/MVVM%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F.html" data-v-8192f772 data-v-329a908c><!--[-->📂  架构设计<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-00293389 data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1732edeb><span class="text" data-v-1732edeb><!----> 📂  开发工具 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1732edeb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><div class="items" data-v-e175fc43><!--[--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Linux/brace.html" data-v-8192f772 data-v-329a908c><!--[-->📂  Linux<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Mac/undefined.html" data-v-8192f772 data-v-329a908c><!--[-->📂  Mac<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/VScode/%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE.html" data-v-8192f772 data-v-329a908c><!--[-->📂  VScode<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-00293389 data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1732edeb><span class="text" data-v-1732edeb><!----> 📂  手撕源码 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1732edeb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><div class="items" data-v-e175fc43><!--[--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/vite%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8C%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0.html" data-v-8192f772 data-v-329a908c><!--[-->✏️  vite工作原理和简单实现<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link active" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Axios/Axios%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB.html" data-v-8192f772 data-v-329a908c><!--[-->📂  Axios<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/01.React%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" data-v-8192f772 data-v-329a908c><!--[-->📂  React<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/Vue3%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" data-v-8192f772 data-v-329a908c><!--[-->📂  Vue<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-00293389 data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1732edeb><span class="text" data-v-1732edeb><!----> 📂  数据与算法 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1732edeb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><div class="items" data-v-e175fc43><!--[--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/1.%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C.html" data-v-8192f772 data-v-329a908c><!--[-->✏️  1.两数之和<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/2.%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0.html" data-v-8192f772 data-v-329a908c><!--[-->✏️  2.两数相加<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/3.%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2.html" data-v-8192f772 data-v-329a908c><!--[-->✏️  3.无重复字符的最长子串<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%88%B7%E9%A2%98%E6%8A%80%E5%B7%A7/2Sum3Sum4Sum%E9%97%AE%E9%A2%98.html" data-v-8192f772 data-v-329a908c><!--[-->📂  刷题技巧<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%89%91%E6%8C%87offer%E7%B3%BB%E5%88%97/03.%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E7%9A%84%E6%95%B0.html" data-v-8192f772 data-v-329a908c><!--[-->📂  剑指offer系列<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%AD%97%E8%8A%82%E6%A0%A1%E5%9B%AD66%E9%A2%98/124.%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E7%9A%84%E6%9C%80%E5%A4%A7%E8%B7%AF%E5%BE%84%E5%92%8C.html" data-v-8192f772 data-v-329a908c><!--[-->📂  字节校园66题<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/0.index.html" data-v-8192f772 data-v-329a908c><!--[-->📂  排序<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.%E6%A0%88%E9%98%9F%E5%88%97.html" data-v-8192f772 data-v-329a908c><!--[-->📂  数据结构<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%88/20.%E6%9C%89%E6%95%88%E7%9A%84%E6%8B%AC%E5%8F%B7.html" data-v-8192f772 data-v-329a908c><!--[-->📂  栈<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/KMP%E7%AE%97%E6%B3%95.html" data-v-8192f772 data-v-329a908c><!--[-->📂  算法基础<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/141.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8.html" data-v-8192f772 data-v-329a908c><!--[-->📂  链表<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-00293389 data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1732edeb><span class="text" data-v-1732edeb><!----> 📂  设计模式 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1732edeb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><div class="items" data-v-e175fc43><!--[--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/01.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/01.%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html" data-v-8192f772 data-v-329a908c><!--[-->📂  01.创建型模式<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/02.%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/01.%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F.html" data-v-8192f772 data-v-329a908c><!--[-->📂  02.结构型模式<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/03.%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/01.%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F.html" data-v-8192f772 data-v-329a908c><!--[-->📂  03.行为型模式<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-00293389 data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1732edeb><span class="text" data-v-1732edeb><!----> 📂  面试题库 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1732edeb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><div class="items" data-v-e175fc43><!--[--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A5/HTML.html" data-v-8192f772 data-v-329a908c><!--[-->📂  字节青训营<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E6%89%8B%E5%86%99%E9%A2%98%E6%95%B4%E7%90%86/CSS-%E4%B8%89%E6%A0%8F%E5%B8%83%E5%B1%80.html" data-v-8192f772 data-v-329a908c><!--[-->📂  手写题整理<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E8%BE%93%E5%87%BA%E9%A2%98%E7%9B%AE/Promise.html" data-v-8192f772 data-v-329a908c><!--[-->📂  输出题目<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E9%9D%A2%E7%BB%8F%E6%95%B4%E7%90%86/2022.10.12KK%E7%BB%BC%E5%90%88%E9%9D%A2.html" data-v-8192f772 data-v-329a908c><!--[-->📂  面经整理<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e175fc43 data-v-8192f772><a class="VPLink link" href="/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E9%A2%98%E7%9B%AE%E6%95%B4%E7%90%86/CSS%E4%B8%93%E9%A2%98.html" data-v-8192f772 data-v-329a908c><!--[-->📂  题目整理<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><!----><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-d864acd5 data-v-b70e1179 data-v-805e89bb><!--[--><a class="VPSocialLink" href="https://github.com/ehitco" target="_blank" rel="noopener" data-v-805e89bb data-v-318a3612><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-d864acd5 data-v-3b44930d data-v-1732edeb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-1732edeb><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-1732edeb><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-1732edeb><div class="VPMenu" data-v-1732edeb data-v-e175fc43><!----><!--[--><!--[--><!----><!----><div class="group" data-v-3b44930d><div class="item social-links" data-v-3b44930d><div class="VPSocialLinks social-links-list" data-v-3b44930d data-v-805e89bb><!--[--><a class="VPSocialLink" href="https://github.com/ehitco" target="_blank" rel="noopener" data-v-805e89bb data-v-318a3612><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-d864acd5 data-v-574ab6fd><span class="container" data-v-574ab6fd><span class="top" data-v-574ab6fd></span><span class="middle" data-v-574ab6fd></span><span class="bottom" data-v-574ab6fd></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-0fff2b0b data-v-37ab62ce><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-37ab62ce><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-37ab62ce><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-37ab62ce>Menu</span></button><a class="top-link" href="#" data-v-37ab62ce> Return to top </a></div><aside class="VPSidebar" data-v-0fff2b0b data-v-22a93cea><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-22a93cea><span class="visually-hidden" id="sidebar-aria-label" data-v-22a93cea> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-22a93cea><section class="VPSidebarGroup collapsible" data-v-22a93cea data-v-38552480><div class="title" role="button" data-v-38552480><h2 class="title-text" data-v-38552480>手撕源码</h2><div class="action" data-v-38552480><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-38552480><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-38552480><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-38552480><!--[--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/vite%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8C%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>vite工作原理和简单实现</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-22a93cea><section class="VPSidebarGroup collapsible" data-v-22a93cea data-v-38552480><div class="title" role="button" data-v-38552480><h2 class="title-text" data-v-38552480>Axios</h2><div class="action" data-v-38552480><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-38552480><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-38552480><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-38552480><!--[--><!--[--><a class="VPLink link link active" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Axios/Axios%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>Axios源码解读</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-22a93cea><section class="VPSidebarGroup collapsible" data-v-22a93cea data-v-38552480><div class="title" role="button" data-v-38552480><h2 class="title-text" data-v-38552480>React</h2><div class="action" data-v-38552480><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-38552480><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-38552480><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-38552480><!--[--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/01.React%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>01.React组件通信解决方案</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/02.ReactRouter%E8%BF%9B%E9%98%B6%E6%8A%80%E5%B7%A7.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>02.ReactRouter进阶技巧</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/03.%E4%B8%80%E6%96%87%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82ReactHooks%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>03.一文彻底搞懂ReactHooks的原理和实现</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/04.%E4%B8%80%E6%96%87%E8%AF%B4%E6%B8%85VirtualDOM%E7%9A%84%E5%90%AB%E4%B9%89%E4%B8%8E%E5%AE%9E%E7%8E%B0.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>04.一文说清VirtualDOM的含义与实现</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/JSX.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>JSX</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/React%E7%94%9F%E6%80%81.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>React生态</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/hooks%20%E4%BC%98%E5%8A%BF.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>hooks 优势</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/%E5%85%A5%E9%97%A8.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>入门</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/%E5%89%AF%E4%BD%9C%E7%94%A8%E7%9A%84%E5%A4%84%E7%90%86.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>副作用的处理</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/%E6%B7%B1%E5%85%A5%E5%8E%9F%E7%90%86.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>深入原理</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/%E7%BB%84%E4%BB%B6.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>组件</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>组件生命周期</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-22a93cea><section class="VPSidebarGroup collapsible" data-v-22a93cea data-v-38552480><div class="title" role="button" data-v-38552480><h2 class="title-text" data-v-38552480>Vue</h2><div class="action" data-v-38552480><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-38552480><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-38552480><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-38552480><!--[--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/Vue3%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>Vue3中的设计模式</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/reactivity%E6%A8%A1%E5%9D%97.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>reactivity模块</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/runtime-core%E6%A8%A1%E5%9D%97.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>runtime-core模块</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/vue3%E5%9F%BA%E7%A1%80.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>vue3基础</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/vue3%E6%96%B0%E7%89%B9%E6%80%A7.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>vue3新特性</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/vue3%E8%B7%AF%E7%94%B1.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>vue3路由</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/vuex%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>vuex的原理和实现</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>数据响应式</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>相关概念</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/Vue/%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98.html" style="padding-left:0px;" data-v-eee38cc9 data-v-329a908c><!--[--><span class="link-text" data-v-eee38cc9>相关问题</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-0fff2b0b data-v-7d46f105><div class="VPDoc has-sidebar has-aside" data-v-7d46f105 data-v-54108fbf><div class="container" data-v-54108fbf><div class="aside" data-v-54108fbf><div class="aside-curtain" data-v-54108fbf></div><div class="aside-container" data-v-54108fbf><div class="aside-content" data-v-54108fbf><div class="VPDocAside" data-v-54108fbf data-v-b3d75131><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-b3d75131 data-v-aeb34b33><div class="content" data-v-aeb34b33><div class="outline-marker" data-v-aeb34b33></div><div class="outline-title" data-v-aeb34b33>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-aeb34b33><span class="visually-hidden" id="doc-outline-aria-label" data-v-aeb34b33> Table of Contents for current page </span><ul class="root" data-v-aeb34b33 data-v-ba19f0d2><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-b3d75131></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-54108fbf><div class="content-container" data-v-54108fbf><!--[--><!--]--><main class="main" data-v-54108fbf><div style="position:relative;" class="vp-doc _%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81_Axios_Axios%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB" data-v-54108fbf><div><h1 id="axios源码解读" tabindex="-1">Axios源码解读 <a class="header-anchor" href="#axios源码解读" aria-hidden="true">#</a></h1><p>「这是我参与11月更文挑战的第4天，活动详情查看：<a href="https://juejin.cn/post/7023643374569816095/" target="_blank" rel="noreferrer">2021最后一次更文挑战</a>」。</p><h2 id="axios-介绍" tabindex="-1"><strong>Axios 介绍</strong> <a class="header-anchor" href="#axios-介绍" aria-hidden="true">#</a></h2><p>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中，支持特性：</p><ul><li>从浏览器创建 <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" target="_blank" rel="noreferrer">XMLHttpRequests</a></li><li>从 node.js 创建 <a href="http://nodejs.org/api/http.html" target="_blank" rel="noreferrer">http</a> 请求</li><li>支持 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">Promise</a> API</li><li>拦截请求和响应</li><li>转换请求和响应数据</li><li>取消请求</li><li>自动转换 <code>JSON</code> 数据</li><li>客户端支持防御<a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery" target="_blank" rel="noreferrer">XSRF</a></li></ul><p>相关文档：<a href="https://axios-http.com/zh/docs/intro" target="_blank" rel="noreferrer">官网文档</a> <a href="https://www.npmjs.com/package/axios" target="_blank" rel="noreferrer">npm</a> <a href="https://github.com/axios/axios" target="_blank" rel="noreferrer">GitHub</a></p><h2 id="源码目录" tabindex="-1">源码目录 <a class="header-anchor" href="#源码目录" aria-hidden="true">#</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">├── /lib/                          // 项目源码</span></span>
<span class="line"><span style="color:#A6ACCD;">  └── /adapters/                     // 定义发送请求的适配器</span></span>
<span class="line"><span style="color:#A6ACCD;">      ├── http.js                       // node环境http对象</span></span>
<span class="line"><span style="color:#A6ACCD;">      ├── xhr.js                        // 浏览器环境XML对象</span></span>
<span class="line"><span style="color:#A6ACCD;">  └── /cancel/                       // 定义取消请求功能</span></span>
<span class="line"><span style="color:#A6ACCD;">  └── /helpers/                      // 辅助方法</span></span>
<span class="line"><span style="color:#A6ACCD;">  └── /core/                         // 核心功能</span></span>
<span class="line"><span style="color:#A6ACCD;">      ├──Axios.js                      // axios实例构造函数                 </span></span>
<span class="line"><span style="color:#A6ACCD;">      ├── createError.js               // 抛出错误</span></span>
<span class="line"><span style="color:#A6ACCD;">      ├── dispatchRequest.js           // 用来调用http请求适配器方法发送请求</span></span>
<span class="line"><span style="color:#A6ACCD;">      ├── InterceptorManager.js        // 拦截器管理器</span></span>
<span class="line"><span style="color:#A6ACCD;">      ├── mergeConfig.js               // 合并参数</span></span>
<span class="line"><span style="color:#A6ACCD;">      ├── settle.js                    // 根据http响应状态，改变Promise的状态</span></span>
<span class="line"><span style="color:#A6ACCD;">      ├── transformData.js             // 转数据格式</span></span>
<span class="line"><span style="color:#A6ACCD;"> └── axios.js                        // 入口，创建构造函数</span></span>
<span class="line"><span style="color:#A6ACCD;"> └── defaults.js                     // 默认配置</span></span>
<span class="line"><span style="color:#A6ACCD;"> └── utils.js                        // 公用工具函数</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="一-从入口出发" tabindex="-1">（一）从入口出发 <a class="header-anchor" href="#一-从入口出发" aria-hidden="true">#</a></h2><p><code>axios</code> 提供一个函数 <code>createInstance</code> 来辅助创建 <code>Axios</code> 类的实例。但是<strong>需要注意的</strong>，该函数返回的并不是 <code>Axios</code> 实例对象，而是实例对象的 <code>request</code> 方法，并且把实例对象的其它别名方法挂载到 <code>request</code> 方法上（函数也是对象，可以添加属性方法）。所以才有下面的用法：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{...}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{...}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// 创建axios实例的方法</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createInstance</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">defaultConfig</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//根据默认配置生成axios实例</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">context</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Axios</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">defaultConfig</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//创建实例，返回request函数，request中this指向context</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instance</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">bind</span><span style="color:#F07178;">(</span><span style="color:#FFCB6B;">Axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">context</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 把Axios原型上的方法继承到instance上，内部的bind使this指向指向context</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">extend</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">instance</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">context</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 拷贝上下文对象属性(默认配置和请求、相应拦截器对象)到实例上</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">extend</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">instance</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">context</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 创建实例的工厂函数，一般axios封装应该都会用到（我们把一些默认、公共的配置都放到一个实例上，复用实例，无需每次都重新创建实例）</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">instance</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">create</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">instanceConfig</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createInstance</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">mergeConfig</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">defaultConfig</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instanceConfig</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//返回实例对象</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instance</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 创建实例</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> axios </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createInstance</span><span style="color:#A6ACCD;">(defaults)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//同时给导出的axios提供了一些其它方法:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 挂载原始Axios类，可以用于继承</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Axios </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Axios</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 中断/取消请求的相关方法</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Cancel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./cancel/Cancel</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CancelToken </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./cancel/CancelToken</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isCancel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./cancel/isCancel</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">VERSION </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./env/data</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">version</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 并发请求，完全是promise</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">all</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">promises</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">promises</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">spread </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./helpers/spread</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 用作监测是否为Axios抛出的错误</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isAxiosError </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./helpers/isAxiosError</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">//导出</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 允许在TypeScript中使用默认导出</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports.</span><span style="color:#A6ACCD;">default </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>当我们引用 <code>Axios</code> 库的时候，它会内部调用 <code>createInstance</code> 初始化并返回 <code>request</code></p><p>我们可以发现，我们平常使用的<code>axios()</code> 和<code>axios.create()</code> ，都是调用<code>createInstance</code> 来创建实例的。</p><p>所以，我们可以通过工厂函数来创建另外一个 <code>axios request</code> ：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;">// 使用默认的 request</span></span>
<span class="line"><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/user</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;">// 使用新的配置发送请求</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> newRequest </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">baseURL</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:9999</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> newRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/user</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="二-axios-类" tabindex="-1">（二）<strong>Axios 类</strong> <a class="header-anchor" href="#二-axios-类" aria-hidden="true">#</a></h2><p><code>Axios</code> 类是最核心的类，封装并提供了请求所使用的 <code>API</code> 。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//Axios.js</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Axios</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">instanceConfig</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">defaults</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instanceConfig</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    request</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">InterceptorManager</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    response</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">InterceptorManager</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;"> * 发送一个请求</span></span>
<span class="line"><span style="color:#676E95;"> *</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">}</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#676E95;"> The config specific for this request (merged with this.defaults)</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#FFCB6B;">Axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">request</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// Allow for axios(&#39;example/url&#39;[, config]) a la fetch API</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arguments</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arguments</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//合并配置</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">mergeConfig</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">defaults</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 设置config.method</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toLowerCase</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">defaults</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">defaults</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toLowerCase</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">transitional</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">transitional</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">transitional</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">validator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">assertOptions</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">transitional</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      silentJSONParsing</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">validators</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transitional</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">validators</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">boolean</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      forcedJSONParsing</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">validators</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transitional</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">validators</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">boolean</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      clarifyTimeoutError</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">validators</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transitional</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">validators</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">boolean</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;">//关键的链式调用，在文章后面具体解析....</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p><code>Axios</code> 基于 <code>request</code> 方法又提供了一些列 <code>HTTP</code> 方法的别名函数，并挂载到原型上：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Provide aliases for supported request methods</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 针对不需要提交正文数据的请求封装处理</span></span>
<span class="line"><span style="color:#A6ACCD;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">delete</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">head</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">options</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">forEachMethodNoData</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#676E95;">/*eslint func-names:0*/</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">Axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">request</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">mergeConfig</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       method</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">       url</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">       data</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 针对可以提交正文数据的请求处理</span></span>
<span class="line"><span style="color:#A6ACCD;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">put</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">patch</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">forEachMethodWithData</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#676E95;">/*eslint func-names:0*/</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">Axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">request</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">mergeConfig</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       method</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">       url</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">       data</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><h2 id="三-配置处理" tabindex="-1"><strong>（三）配置处理</strong> <a class="header-anchor" href="#三-配置处理" aria-hidden="true">#</a></h2><p>在 <code>Axios</code> 中分别有三处配置点：</p><ul><li>请求方法配置</li><li>实例配置</li><li>全局配置</li></ul><blockquote><p>参考：<a href="https://axios-http.com/zh/docs/req_config" target="_blank" rel="noreferrer">https://axios-http.com/zh/docs/req_config</a></p></blockquote><h3 id="_1-请求方法配置" tabindex="-1"><strong>（1）请求方法配置</strong> <a class="header-anchor" href="#_1-请求方法配置" aria-hidden="true">#</a></h3><p>是指在 <code>request</code> 以及 <code>get</code>、<code>post</code> 等别名方法中传入的配置</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/user</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/user</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F07178;">params</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F07178;">page</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F07178;">limit</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">2</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span></span>
<span class="line"></span></code></pre></div><h3 id="_2-实例化配置" tabindex="-1">（2）<strong>实例化配置</strong> <a class="header-anchor" href="#_2-实例化配置" aria-hidden="true">#</a></h3><p>我们还可以通过实例化的时候传入基础配置（我们可以把某些请求公用的配置在实例化的时候传入）</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> newRequest </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F07178;">baseURL</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:9999</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-全局-默认-配置" tabindex="-1">（3）<strong>全局（默认）配置</strong> <a class="header-anchor" href="#_3-全局-默认-配置" aria-hidden="true">#</a></h3><p><code>axios</code> 还有一组默认配置项，如果实例化的时候没有传入或者 <code>axios</code> 默认导出的那个实例化使用的就是默认配置。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 默认配置 可以通过 axios.defaults 来获取</span></span>
<span class="line"><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">defaults</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">baseURL </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:8888</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/user</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="配置优先级" tabindex="-1"><strong>配置优先级</strong> <a class="header-anchor" href="#配置优先级" aria-hidden="true">#</a></h3><blockquote><p>请求配置 &gt; 实例配置 &gt; 默认配置</p></blockquote><h2 id="四-拦截器的应用与实现" tabindex="-1"><strong>（四）拦截器的应用与实现</strong> <a class="header-anchor" href="#四-拦截器的应用与实现" aria-hidden="true">#</a></h2><p>在 <code>axios</code> 中有一个类似中间件的机制用来在 <code>request</code> 方法请求之前和响应以后（用户代码执行之前）去处理一些任务。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// 添加请求拦截器</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 在发送请求之前做些什么</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 对请求错误做些什么</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 添加响应拦截器</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 2xx 范围内的状态码都会触发该函数。</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 对响应数据做点什么</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 超出 2xx 范围的状态码都会触发该函数。</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 对响应错误做点什么</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>参考：<a href="https://axios-http.com/zh/docs/interceptors" target="_blank" rel="noreferrer">https://axios-http.com/zh/docs/interceptors</a></p></blockquote><h4 id="拦截器实现" tabindex="-1"><strong>拦截器实现</strong> <a class="header-anchor" href="#拦截器实现" aria-hidden="true">#</a></h4><p>拦截器的实现是比较简单的，本质上就是类似中间件数组，一共有两组：请求、响应。通过统一模型，构造统一控制器管理拦截器的注册、注销、执行。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// Axios.js  </span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Axios</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">instanceConfig</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">defaults</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instanceConfig</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;">// 这里创建的请求和响应拦截器 通过统一的类构造出来的</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     request</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">InterceptorManager</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">     response</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">InterceptorManager</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// core/InterceptorManager.js</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">InterceptorManager</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handlers</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;">// 添加拦截器 添加成功、失败回调</span></span>
<span class="line"><span style="color:#FFCB6B;">InterceptorManager</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">use</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fulfilled</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">rejected</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handlers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    fulfilled</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fulfilled</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    rejected</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rejected</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 默认情况下它们被假定为异步的 如果您的请求拦截器是同步的，可以通过这个参数默认配置，它将告诉 axios 同步运行代码并避免请求执行中的任何延迟。</span></span>
<span class="line"><span style="color:#F07178;">    synchronous</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">synchronous</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 如果要基于运行时检查执行特定拦截器，可以通过这个runWhen这个参数，类型为函数 </span></span>
<span class="line"><span style="color:#F07178;">    runWhen</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">runWhen</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handlers</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 注销指定拦截器</span></span>
<span class="line"><span style="color:#FFCB6B;">InterceptorManager</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">eject</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">eject</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handlers</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;">]) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handlers</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 遍历执行</span></span>
<span class="line"><span style="color:#FFCB6B;">InterceptorManager</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">forEach</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fn</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">handlers</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">forEachHandler</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">h</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 确定没被eject注销 才执行</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">h</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">fn</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">h</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> InterceptorManager</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="拦截器的执行原理" tabindex="-1">拦截器的执行原理 <a class="header-anchor" href="#拦截器的执行原理" aria-hidden="true">#</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// Axios.js </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">request</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#676E95;">// 关键的链式调用</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;">// 链式调用存储数组 -- 请求数组</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">requestInterceptorChain</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;">// 默认所有请求拦截器都为同步</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">synchronousRequestInterceptors</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;">//遍历注册好的拦截器数组</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">unshiftRequestInterceptors</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">interceptor</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// 这里interceptor是注册的每一个拦截器对象 </span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// axios请求拦截器向外暴露了runWhen配置来针对一些需要运行时检测来执行的拦截器</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// 例如：实现一个只有get方法才生效的拦截器</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// </span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// function onGetCall(config) {</span></span>
<span class="line"><span style="color:#89DDFF;"> 		 </span><span style="color:#676E95;">//	   return config.method === &#39;get&#39;;</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// }</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// axios.interceptors.request.use(function (config) {</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">//   config.headers.test = &#39;special get headers&#39;;</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">//   return config;</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// }, null, { runWhen: onGetCall });</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// </span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// 如果配置了该函数，并且返回结果为true，则记录到拦截器链中</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">// 反之则直接结束该层循环</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">interceptor</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">runWhen</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">interceptor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">runWhen</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// interceptor.synchronous 是对外提供的配置，可标识该拦截器是异步还是同步 默认为false(异步) </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 这里是来同步整个执行链的执行方式的，如果有一个请求拦截器为异步 那么下面的promise执行链则会有不同的执行方式</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">synchronousRequestInterceptors</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">synchronousRequestInterceptors</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">interceptor</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">synchronous</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">//将interceptor.fulfilled, interceptor.rejected加入chain开头</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">requestInterceptorChain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">unshift</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">interceptor</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fulfilled</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">interceptor</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">rejected</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;">//链式调用存储数组 -- 响应数组</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">responseInterceptorChain</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">pushResponseInterceptors</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">interceptor</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">//将interceptor.fulfilled, interceptor.rejected加入chain末尾</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">responseInterceptorChain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">interceptor</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fulfilled</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">interceptor</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">rejected</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">promise</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;">// 如果为异步 其实也是默认情况</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">synchronousRequestInterceptors</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">//dispatchRequest方法在适配器部分讲解</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">chain</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> [</span><span style="color:#A6ACCD;">dispatchRequest</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#676E95;">// 请求拦截器塞到前面</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#FFCB6B;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">unshift</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">chain</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">requestInterceptorChain</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#676E95;">// 响应拦截器塞到后面</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">chain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">concat</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">responseInterceptorChain</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> 			</span><span style="color:#676E95;">//chain = [fulfilled[1],rejected[1],fulfilled[0],rejected[0],dispatchRequest, undefined,fulfilled[3],rejected[3],fulfilled[4],rejected[4]]</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">promise</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">while</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">chain</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;">// (fulfilled,rejected) 每次一组两个</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// shift：从数组中删除第一个元素，并返回该元素的值。此方法更改数组的长度。</span></span>
<span class="line"><span style="color:#89DDFF;">       </span><span style="color:#676E95;">// 每次promise都会被重新赋值</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#A6ACCD;">promise</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">chain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">shift</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">chain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">shift</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">     </span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">promise</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#676E95;">// 这里则是同步的逻辑 </span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;">// 请求拦截器一个一个的走</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">while</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">requestInterceptorChain</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">onFulfilled</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">requestInterceptorChain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">shift</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">onRejected</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">requestInterceptorChain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">shift</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">       </span><span style="color:#676E95;">//每次拿到最新的config</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#A6ACCD;">newConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">onFulfilled</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newConfig</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#82AAFF;">onRejected</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;">break</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;"> 	 </span><span style="color:#676E95;">// 到这里 微任务不会过早的创建</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;">// 也就解决了 微任务过早创建、当前宏任务过长或某个请求拦截器中有异步任务而阻塞真正的请求延时发起问题</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">promise</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">dispatchRequest</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newConfig</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#676E95;">// 响应拦截器执行</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">while</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">responseInterceptorChain</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">promise</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">responseInterceptorChain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">shift</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">responseInterceptorChain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">shift</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">promise</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="拦截器的应用" tabindex="-1"><strong>拦截器的应用</strong> <a class="header-anchor" href="#拦截器的应用" aria-hidden="true">#</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 添加请求拦截器</span></span>
<span class="line"><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#676E95;">// 发送 token</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getItem</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">authorization</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">token</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 添加响应拦截器</span></span>
<span class="line"><span style="color:#A6ACCD;"> axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">请求日志</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">response</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">请求日志</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">response</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">出错了</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="五-适配器" tabindex="-1"><strong>（五）适配器</strong> <a class="header-anchor" href="#五-适配器" aria-hidden="true">#</a></h2><p>在浏览器中我们使用 <code>XMLHttpRequest</code> 提供的 <code>API</code> 来发送请求，在 <code>Node.js</code> 端我们需要使用 <code>http</code> 模块提供的 <code>API</code> 来发送请求，他们在底层提供的 <code>API</code> 结构包括针对响应数据的格式包装也不并不一致。那么 <code>axios</code> 为了能够解决这种差异，让使用者在不同的环境下使用统一的 <code>API</code> ，就采用了适配模式。</p><p><img src="https://i.loli.net/2021/11/26/oD7eRaxIKiFSb4Z.png" alt="Untitled.png"></p><p>经典的设计模式：适配器模式应用。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getDefaultAdapter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">adapter</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 判断XMLHttpRequest对象是否存在 存在则代表为浏览器环境</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">XMLHttpRequest</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// For browsers use XHR adapter</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">adapter</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">require</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./adapters/xhr</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// node环境 使用原生http发起请求</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">process</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toString</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">process</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[object process]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">adapter</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">require</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./adapters/http</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">adapter</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">dispatchRequest</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;">// 提前取消请求</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">throwIfCancellationRequested</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 赋个默认值</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 转换数据</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">transformData</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">transformRequest</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 合并headers配置</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">merge</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">common</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 删除多余的被合并过的数据</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">    [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">delete</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">head</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">put</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">patch</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">common</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">cleanHeaderConfig</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">delete</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 适配器 axios是可以支持node端也支持浏览器端的 </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">adapter</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">adapter</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defaults</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">adapter</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 执行请求</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">adapter</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">onAdapterResolution</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 提前取消请求情况</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">throwIfCancellationRequested</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 做数据转换</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">transformData</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">transformResponse</span></span>
<span class="line"><span style="color:#F07178;">    )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">onAdapterRejection</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">reason</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#82AAFF;">isCancel</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">throwIfCancellationRequested</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// 做数据转换</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reason</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">response</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">reason</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">transformData</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">reason</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">reason</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">transformResponse</span></span>
<span class="line"><span style="color:#F07178;">        )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p><code>./adapters/xhr.js</code> 则是对原生ajax <code>XMLHttpRequest</code>对象的的封装,</p><p><code>./adapters/http.js</code> 则是对node <code>http</code>模块的封装，也会针对https做相应处理。</p><h2 id="六-取消请求" tabindex="-1">（六）取消请求 <a class="header-anchor" href="#六-取消请求" aria-hidden="true">#</a></h2><p>在<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faxios%2Faxios%2Fblob%2Fmaster%2Flib%2Faxios.js%23L39" title="https://github.com/axios/axios/blob/master/lib/axios.js#L39" target="_blank" rel="noreferrer"><strong>lib/axios.js</strong></a> <code>axios</code>实例对外抛出了三个取消请求的相关接口，我们来看一下涉及取消请求的是三个文件，在 <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faxios%2Faxios%2Ftree%2Fmaster%2Flib%2Fcancel" title="https://github.com/axios/axios/tree/master/lib/cancel" target="_blank" rel="noreferrer"><strong>/lib/cancel/</strong></a> 中 , 分别的作用:</p><p>1.<strong>CanceledError.js</strong> : <code>CanceledError</code>函数(伪造类)，接受参数message其实就是调用<code>source.cancel()</code>中的参数：取消信息 ,原型对象上的<code>__CANCEL__</code> 属性，是为了标识改请求返回信息为取消请求返回的信息</p><p>2.<strong>CancelToken.js</strong> ：<code>CancelToken</code>提供创建token实例注册取消请求能力及提供取消请求方法</p><p>3.<strong>isCancel.js</strong> ：用于判断是为为取消请求返回的结果，也就是是否是Cancel实例</p><ul><li>source方法</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// 暴露出token 和 cancel取消方法</span></span>
<span class="line"><span style="color:#A6ACCD;">CancelToken</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">source</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cancel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 构造CancelToken 的实例,实例上有两个属性一个promise一个reason</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 同时把注册的回调函数的参数也是个函数把这个函数的执行权抛使用者调用(cancel)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">CancelToken</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">executor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">cancel</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    token</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">token</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    cancel</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cancel</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>source方法返回的对象中有两个属性：<code>token</code> 为 <code>new CancelToken</code>的一个实例，<code>cancel</code> 是 <code>new CancelToken</code> 时候函数<code>executor</code>的一个参数，用来在需要的时候调用主动取消请求。我们来分析下<code>CancelToken</code>的源代码。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CancelToken</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">executor</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 类型判断</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">executor</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">executor must be a function.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 创建一个promise的实例</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resolvePromise</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">promise</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">promiseExecutor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 把resolve方法提出来 当resolvePromise执行时，this.promise状态会变为fulfilled</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">resolvePromise</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 存一下this</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// new CancelToken时会立即调用executor方法 也就是 会执行source方法中的cancel = c;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 这里也就是把cancel函数暴露出去了，把取消的时机留给了使用者 使用者调用cancel时候也就会执行函数内的逻辑</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">executor</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">cancel</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 请求已经被取消了直接return</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">token</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// 给token(可就是当前this上)添加参数 调用new Cancel构造出cancel信息实例</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">token</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Cancel</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 这里当主动调用cancel方法时，就会把this.promise实例状态改为fulfilled，resolve出的信息则是reason（new Cancel实例）</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">resolvePromise</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">token</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>在adapter中的操作</strong></p><p>当我们调用了<code>cancel</code>方法后，我们在请求中是如何进行中断/取消请求的。在适配器中这样一段代码可以找到想要的答案。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// 判断使用者在改请求中是否配置了取消请求的token</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cancelToken) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 如果配置了则将实例上的promise用.then来处理主动取消调用cancel方法时的逻辑 </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 也就是说如果ajax请求发送出去之前，这时我们已经给cancelToken的promise注册了.then</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 当我们调用cancel方法时，cancelToken实例的promise会变为fulfilled状态，.then里的逻辑就会执行</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cancelToken</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">onCanceled</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">cancel</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">request</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 调用 原生abort取消请求的方法</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">abort</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// axios的promise实例进入rejected状态 这里我们可以看到主动取消的请求是catch可以捕获到</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cancel</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// request置为null</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">request</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;">// 真正的请求在这时才发送出去！！！</span></span>
<span class="line"><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#A6ACCD;">(requestData)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>上面是我们axios在请求中，中断请求的方式，那其他的情况下，请求前、请求完成后也是可以提前去做取消的逻辑的，这样也可以避免多余请求发送和不必要的逻辑执行，我们来看下是怎么做的吧。我们先看下<code>CancelToken</code>原型上的<code>throwIfRequested</code>方法：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// CancelToken原型上有个么一个方法 很简单就是直接抛错 将reason抛出</span></span>
<span class="line"><span style="color:#676E95;">// reason则是根据调用cancel函数的参数 new Cancel的实例</span></span>
<span class="line"><span style="color:#FFCB6B;">CancelToken</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">throwIfRequested</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">throwIfRequested</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">reason</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>在我们的核心请求方法<code>dispatchRequest</code>中：</p><p>直接抛错，代表会将axios构建的promise实例状态直接置为rejected，所以直接就走.catch的逻辑了</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// 判断如果配置了取消请求的token则就抛出</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">throwIfCancellationRequested</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cancelToken</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 调用抛出错误的方法</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cancelToken</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">throwIfRequested</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">dispatchRequest</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 请求前</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">throwIfCancellationRequested</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ... 省略代码</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 请求中的在上面adapter中</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">adapter</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">onAdapterResolution</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 请求完成后</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">throwIfCancellationRequested</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// ... 省略代码</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">onAdapterRejection</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">reason</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 请求完成后</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#82AAFF;">isCancel</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">throwIfCancellationRequested</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// ... 省略代码</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>我们就在<code>axios</code>请求在<code>catch</code>中通过<code>isCancel</code>方法判断这个异常是不是取消请求抛出来的，也就是判断他是不是Cancel实例, 从而做相应处理。</p><p><img src="https://cdn.jsdelivr.net/gh/Merlin218/image-storage/picGo/202205011106728.png" alt=""></p><h2 id="七-写在最后" tabindex="-1">（七）写在最后 <a class="header-anchor" href="#七-写在最后" aria-hidden="true">#</a></h2><p>文中如有错误，欢迎大家在评论区指正，如果这篇文章帮助到了你，欢迎点赞👍和关注❤️</p><p><strong>内容参考（感谢）：</strong></p><p><a href="https://github.com/axios/axios" target="_blank" rel="noreferrer">Github仓库--Axios</a></p><p><a href="https://juejin.cn/post/7016255507392364557" target="_blank" rel="noreferrer">最全、最详细Axios源码解读---看这一篇就足够了</a></p><p>文章持续更新中～欢迎关注我的掘金和github~</p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-54108fbf data-v-7eb3932b><div class="edit-info" data-v-7eb3932b><!----><div class="last-updated" data-v-7eb3932b><p class="VPLastUpdated" data-v-7eb3932b data-v-804d0348>Last Updated: <time datetime="2022-12-08T06:24:26.000Z" data-v-804d0348></time></p></div></div><div class="prev-next" data-v-7eb3932b><div class="pager" data-v-7eb3932b><a class="pager-link prev" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/vite%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8C%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0.html" data-v-7eb3932b><span class="desc" data-v-7eb3932b>Previous page</span><span class="title" data-v-7eb3932b>vite工作原理和简单实现</span></a></div><div class="has-prev pager" data-v-7eb3932b><a class="pager-link next" href="/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/React/01.React%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" data-v-7eb3932b><span class="desc" data-v-7eb3932b>Next page</span><span class="title" data-v-7eb3932b>01.React组件通信解决方案</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-0fff2b0b data-v-87c3282c><div class="container" data-v-87c3282c><!----><p class="copyright" data-v-87c3282c>Copyright © 2013-present ehnote</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"nodejs_01.koa_01.koa源码：核心库原理.md\":\"e154b881\",\"nodejs_01.koa_02.koa源码：架构设计.md\":\"c79dc5ea\",\"nodejs_01.koa_03.koa源码：手动实现.md\":\"0edc18b5\",\"nodejs_02.命令行_01.玩转nodejs命令行.md\":\"c84492f8\",\"nodejs_03.测试_01.jest实战：单元测试与服务测试.md\":\"957ae807\",\"nodejs_03.测试_02.jest进阶：接入ts、集成测试与覆盖率统计.md\":\"7e5a4fb8\",\"nodejs_04.serverless_01.基于实时数据库-在线对战五子棋小游戏.md\":\"3b51c5e1\",\"nodejs_04.serverless_02.基于serverless的极简网页计数器：源码分析与最佳实践.md\":\"0540f91b\",\"nodejs_05.更多_01.nodejs实现简易区块链.md\":\"8f987ed3\",\"nodejs_05.更多_02.负载均衡：轮询调度算法实现.md\":\"2b867b6f\",\"nodejs_05.更多_03.vemojs源码拆解.md\":\"2ceab8b6\",\"nodejs_05.更多_04.nodejs是如何监听文件的变化.md\":\"8a1ebf93\",\"nodejs_05.更多_05.日志库的实现机制与优化方法.md\":\"25050f32\",\"nodejs_数据库_关键词.md\":\"8901e246\",\"nodejs_数据库_函数.md\":\"9d8ff822\",\"nodejs_数据库_分组.md\":\"0b4b0495\",\"nodejs_数据库_基础.md\":\"86ba98ae\",\"nodejs_数据库_存储过程.md\":\"5dfc22d1\",\"nodejs_数据库_查询.md\":\"6b8b0748\",\"nodejs_数据库_维护数据.md\":\"afa2669e\",\"nodejs_数据库_维护表.md\":\"422ea5a8\",\"nodejs_数据库_视图.md\":\"276d5647\",\"nodejs_数据库_触发器.md\":\"156a8c46\",\"webrtc_sdp.md\":\"107b3b03\",\"index.md\":\"426cc606\",\"前端基础_css_css3新特性.md\":\"d85c7109\",\"前端基础_css_css模块化.md\":\"9981656f\",\"前端基础_css_定位与浮动.md\":\"c5e54a8a\",\"前端基础_css_盒子模型.md\":\"398f19fc\",\"前端基础_css_选择器.md\":\"f4ff692e\",\"前端基础_canvas_echart.md\":\"6e14b4f0\",\"前端基础_es6_01.promise_01.promise概述.md\":\"e43a0031\",\"前端基础_es6_01.promise_02.手写promise的相关方法.md\":\"883f384f\",\"前端基础_es6_01.promise_03.手动实现promise.md\":\"fed46dfe\",\"前端基础_es6_02.es6重难点整理.md\":\"d4aaf573\",\"前端基础_es6_03.谈谈promise-async-await的执行顺序与v8引擎的bug.md\":\"29218962\",\"前端基础_html_html.md\":\"8270d463\",\"前端基础_http_https握手过程.md\":\"fad6ab7b\",\"前端基础_http_http、https代理分析及原理.md\":\"f1aaa380\",\"前端基础_http_http协议演进.md\":\"c10bb572\",\"前端基础_http_http报文.md\":\"ed497b86\",\"前端基础_http_http缓存机制.md\":\"23029eb1\",\"前端基础_http_http详解.md\":\"1b3aaa36\",\"前端基础_http_web和http.md\":\"fc2a2358\",\"前端基础_http_localhost和127.0.0.1的区别.md\":\"7a6acc27\",\"前端基础_http_常见的状态码.md\":\"f4f6080f\",\"前端基础_http_当ping一个ip地址会发生什么.md\":\"790b68c0\",\"前端基础_http_输入网址后发生什么.md\":\"4cb22f4c\",\"前端基础_javascript_ajax.md\":\"b6476b47\",\"前端基础_javascript_canvas.md\":\"92c1862a\",\"前端基础_javascript_es6.md\":\"6147d115\",\"前端基础_javascript_html中的javascript.md\":\"72e1023f\",\"前端基础_javascript_promise.md\":\"9f4dd819\",\"前端基础_javascript_call_apply_bind用法及区别.md\":\"eaaaaf72\",\"前端基础_javascript_javascript模块化之commonjs、amd、cmd、umd、es6.md\":\"db3ae52f\",\"前端基础_javascript_new 操作符.md\":\"5e3b4e46\",\"前端基础_javascript_this.md\":\"8d70d96f\",\"前端基础_javascript_事件循环.md\":\"6e75ee16\",\"前端基础_javascript_原型.md\":\"59246636\",\"前端基础_javascript_变量与作用域.md\":\"d09ee4e4\",\"前端基础_javascript_垃圾回收机制.md\":\"bab15e7b\",\"前端基础_javascript_基础.md\":\"e86a7b5a\",\"前端基础_javascript_对象.md\":\"f69305b3\",\"前端基础_javascript_常用数组操作.md\":\"7679dc87\",\"前端基础_javascript_异步编程.md\":\"33b6f667\",\"前端基础_javascript_数据类型.md\":\"c83fd6bd\",\"前端基础_javascript_正则表达式.md\":\"6d87d359\",\"前端基础_javascript_深拷贝.md\":\"99972cb5\",\"前端基础_javascript_类型与值.md\":\"8176d88d\",\"前端基础_javascript_自定义事件event.md\":\"be77577c\",\"前端基础_javascript_节流防抖.md\":\"99f3f63b\",\"前端基础_javascript_高阶函数.md\":\"7d67a159\",\"前端基础_typescript_typescript基础.md\":\"51474826\",\"前端基础_typescript_泛型.md\":\"10cd73bd\",\"前端基础_v8引擎_javascript中的函数.md\":\"1290a1f9\",\"前端基础_v8引擎_v8如何执行一段javascript代码.md\":\"ee3c773b\",\"前端基础_v8引擎_快属性和慢属性.md\":\"1a49f520\",\"前端基础_websocket_websocket协议.md\":\"9d7fbc5a\",\"前端基础_websocket_数据帧及服务端推送.md\":\"aa0216f8\",\"前端基础_websocket_连接建立.md\":\"ebae76a4\",\"前端基础_index.md\":\"e8a39eef\",\"前端基础_浏览器_事件机制.md\":\"16095e43\",\"前端基础_浏览器_前端路由.md\":\"d2646f37\",\"前端基础_浏览器_发展过程.md\":\"265854fe\",\"前端基础_浏览器_多进程架构.md\":\"a613d3d2\",\"前端基础_浏览器_安全防范.md\":\"25a5301e\",\"前端基础_浏览器_客户端存储.md\":\"bac58c64\",\"前端基础_浏览器_渲染流程.md\":\"afcc071a\",\"前端基础_浏览器_缓存机制.md\":\"b06ed443\",\"前端基础_浏览器_跨域问题.md\":\"0d5b0a1f\",\"前端基础_浏览器_跨页面通信.md\":\"8c4531b4\",\"前端基础_计算机网络_dns.md\":\"99836960\",\"前端基础_计算机网络_http.md\":\"121680e0\",\"前端基础_计算机网络_ip基础知识.md\":\"a71bc8ad\",\"前端基础_计算机网络_tcp.md\":\"78bb88b6\",\"前端基础_计算机网络_udp.md\":\"4788ad24\",\"前端基础_计算机网络_数据链路层.md\":\"85ce7ca6\",\"前端基础_计算机网络_物理层.md\":\"58dd74b8\",\"前端基础_计算机网络_网络模型.md\":\"5b6daf5e\",\"前端基础_面向对象.md\":\"035b498e\",\"前端架构_git笔记手册_01.标签应用和版本管理.md\":\"7cd0cea6\",\"前端架构_git笔记手册_02.批量修改log中的提交信息.md\":\"a2cb1a47\",\"前端架构_git笔记手册_03.stash解惑与妙用.md\":\"580271e4\",\"前端架构_前端工程化_ast抽象语法树.md\":\"a133f463\",\"前端架构_前端工程化_webpack性能优化.md\":\"ba62590e\",\"前端架构_前端工程化_git.md\":\"f50a2e7d\",\"前端架构_前端工程化_jest.md\":\"bf0217f7\",\"前端架构_前端工程化_tsconfig.zh.md\":\"4f4fbe9d\",\"前端架构_前端工程化_webpack基础.md\":\"69ac116a\",\"前端架构_前端工程化_webpack进阶.md\":\"ddfe52ef\",\"前端架构_前端工程化_加载chunk.md\":\"b14ee9c2\",\"前端架构_前端工程化_包管理工具.md\":\"e37762fc\",\"前端架构_前端工程化_模块化方案.md\":\"20159468\",\"前端架构_前端工程化_运行时原理与分析.md\":\"1cfd3321\",\"前端架构_前端监控.md\":\"60c4118a\",\"前端架构_前端部署_docker使用指南.md\":\"c4826c54\",\"前端架构_前端部署_nginx配置指南.md\":\"6d001a42\",\"前端架构_前端部署_traefik服务编排.md\":\"9262cce3\",\"前端架构_前端部署_前端项目部署.md\":\"d2b22306\",\"前端架构_前端部署_持续集成部署.md\":\"7d7e8376\",\"前端架构_前端部署_简单服务器部署.md\":\"10782d64\",\"前端架构_开发规范.md\":\"8bb45d8b\",\"前端架构_架构设计_mvvm软件架构模式.md\":\"3b506009\",\"前端架构_架构设计_架构风格.md\":\"7ff2ad00\",\"前端架构_架构设计_评估web架构.md\":\"95b4fbd4\",\"开发工具_linux_brace.md\":\"aad933a8\",\"开发工具_linux_cat、less、head、tail.md\":\"9186bf22\",\"开发工具_linux_chmod、chown.md\":\"eb2c79b5\",\"开发工具_linux_env.md\":\"87682f91\",\"开发工具_linux_find、ag.md\":\"4ff87b37\",\"开发工具_linux_for、if.md\":\"c8603e51\",\"开发工具_linux_glob.md\":\"ce7a0266\",\"开发工具_linux_ln.md\":\"4b9e1f6b\",\"开发工具_linux_pipe、redirection.md\":\"46d7ab39\",\"开发工具_linux_rsync.md\":\"9ce5a0b9\",\"开发工具_linux_ssh隧道.md\":\"67c22e03\",\"开发工具_linux_stat.md\":\"e5c11f7c\",\"开发工具_linux_zsh.md\":\"bb662917\",\"开发工具_linux_引号与括号.md\":\"6b607f26\",\"开发工具_linux_快捷键.md\":\"82532a5f\",\"开发工具_linux_数组与字典.md\":\"18215f31\",\"开发工具_linux_用户登录.md\":\"095b236c\",\"开发工具_linux_用户相关.md\":\"44b14c90\",\"开发工具_linux_目录与切换操作.md\":\"80e9ac50\",\"开发工具_vscode_常用快捷键.md\":\"46aeac03\",\"开发工具_vscode_防止vscode 代码提示，的歧义确认快捷键。回车，结束符.md\":\"dbd6e0da\",\"手撕源码_axios_axios源码解读.md\":\"52effe3d\",\"手撕源码_react_01.react组件通信解决方案.md\":\"39d636ac\",\"手撕源码_react_02.reactrouter进阶技巧.md\":\"529686cc\",\"手撕源码_react_03.一文彻底搞懂reacthooks的原理和实现.md\":\"4ffb59a7\",\"手撕源码_react_04.一文说清virtualdom的含义与实现.md\":\"5bc7bcf0\",\"手撕源码_react_jsx.md\":\"e19a80b4\",\"手撕源码_react_react生态.md\":\"d338a98e\",\"手撕源码_react_hooks 优势.md\":\"18224a5d\",\"手撕源码_react_入门.md\":\"b08d2fb9\",\"手撕源码_react_副作用的处理.md\":\"6ac7bf74\",\"手撕源码_react_深入原理.md\":\"a242116c\",\"手撕源码_react_组件.md\":\"c6026698\",\"手撕源码_react_组件生命周期.md\":\"2851b975\",\"手撕源码_vue_vue3中的设计模式.md\":\"60edd7eb\",\"手撕源码_vue_reactivity模块.md\":\"14e09970\",\"手撕源码_vue_runtime-core模块.md\":\"a196c05a\",\"手撕源码_vue_vue3基础.md\":\"9fe85586\",\"手撕源码_vue_vue3新特性.md\":\"cdf615f1\",\"手撕源码_vue_vue3路由.md\":\"e573f79b\",\"手撕源码_vue_vuex的原理和实现.md\":\"fa9b9a8f\",\"手撕源码_vue_数据响应式.md\":\"8952a86d\",\"手撕源码_vue_相关概念.md\":\"b8ccaf57\",\"手撕源码_vue_相关问题.md\":\"3f3842c8\",\"手撕源码_vite工作原理和简单实现.md\":\"db90f6eb\",\"数据与算法_1.两数之和.md\":\"4f25c670\",\"数据与算法_2.两数相加.md\":\"5e3bcffb\",\"数据与算法_3.无重复字符的最长子串.md\":\"6e14d38a\",\"数据与算法_刷题技巧_2sum3sum4sum问题.md\":\"b76996e6\",\"数据与算法_刷题技巧_bfs算法基础.md\":\"e17a3154\",\"数据与算法_刷题技巧_leetcode 股票买卖问题.md\":\"978717bb\",\"数据与算法_刷题技巧_lru缓存机制.md\":\"29444fca\",\"数据与算法_刷题技巧_二分图简介.md\":\"de115164\",\"数据与算法_刷题技巧_二分查找技巧.md\":\"1e37ea6a\",\"数据与算法_刷题技巧_二叉搜索树.md\":\"314cd034\",\"数据与算法_刷题技巧_二叉树基础.md\":\"38e5cac9\",\"数据与算法_刷题技巧_二维数组的遍历技巧.md\":\"2d993427\",\"数据与算法_刷题技巧_以o(1)时间删除数组元素.md\":\"9dba1e2b\",\"数据与算法_刷题技巧_位运算.md\":\"d8ca3197\",\"数据与算法_刷题技巧_动态规划.md\":\"ba98b517\",\"数据与算法_刷题技巧_动态规划：编辑距离.md\":\"a4cbabb6\",\"数据与算法_刷题技巧_动态规划：魔塔.md\":\"259798fa\",\"数据与算法_刷题技巧_单调队列结构解决滑动窗口问题.md\":\"49c4f36f\",\"数据与算法_刷题技巧_单链表的六大解题套路.md\":\"bdeecc70\",\"数据与算法_刷题技巧_回溯算法.md\":\"19df618a\",\"数据与算法_刷题技巧_回溯算法解决排列、组合、子集问题.md\":\"e307ee3e\",\"数据与算法_刷题技巧_图论基础.md\":\"a9e6d114\",\"数据与算法_刷题技巧_小而美的算法技巧：前缀和数组.md\":\"96633a16\",\"数据与算法_刷题技巧_小而美的算法技巧：差分数组.md\":\"fd3cae2d\",\"数据与算法_刷题技巧_岛屿相关问题.md\":\"e185d514\",\"数据与算法_刷题技巧_并查集算法.md\":\"83a8ddb4\",\"数据与算法_刷题技巧_拓扑排序详解及运用.md\":\"6aed37cf\",\"数据与算法_刷题技巧_最长递增子序列.md\":\"86115860\",\"数据与算法_刷题技巧_滑动窗口技巧.md\":\"f35a1e41\",\"数据与算法_刷题技巧_递归反转链表的一部分.md\":\"5ec345e0\",\"数据与算法_刷题技巧_集合划分问题.md\":\"1d7c9731\",\"数据与算法_剑指offer系列_03.数组中重复的数.md\":\"79f23981\",\"数据与算法_剑指offer系列_04.二维数组中的查找.md\":\"7575614e\",\"数据与算法_剑指offer系列_09.用两个栈实现队列.md\":\"ef5acd63\",\"数据与算法_剑指offer系列_12.矩阵中的路径.md\":\"0a5a495c\",\"数据与算法_剑指offer系列_13.机器人的运动范围.md\":\"394e5e02\",\"数据与算法_剑指offer系列_14-i.剪绳子.md\":\"bc0c160f\",\"数据与算法_剑指offer系列_16.数值的整数次方.md\":\"fdf5dcba\",\"数据与算法_剑指offer系列_24.反转链表.md\":\"97a865f4\",\"数据与算法_剑指offer系列_31.栈的压入、弹出序列.md\":\"bce7ab9d\",\"数据与算法_剑指offer系列_34.二叉树中和为某一值的路径.md\":\"1e286f1b\",\"数据与算法_剑指offer系列_35.复杂链表的复制.md\":\"2365fadf\",\"数据与算法_剑指offer系列_36.二叉搜索树与双向链表.md\":\"91d291b3\",\"数据与算法_剑指offer系列_41.数据流中的中位数.md\":\"695264a2\",\"数据与算法_剑指offer系列_45.把数组排成最小的数.md\":\"9cf182e1\",\"数据与算法_剑指offer系列_48.最长不含重复字符的子字符串.md\":\"a6adff16\",\"数据与算法_剑指offer系列_49.丑数.md\":\"a5b9d6d2\",\"数据与算法_剑指offer系列_51.数组中的逆序对.md\":\"b7e2ac43\",\"数据与算法_剑指offer系列_53-ii.0～n-1中缺失的数字.md\":\"62b2cb7d\",\"数据与算法_剑指offer系列_53.在排序数组中查找数字i.md\":\"9b43d108\",\"数据与算法_剑指offer系列_54.二叉搜索树的第k大节点.md\":\"37ad82bc\",\"数据与算法_剑指offer系列_55-i.二叉树的深度.md\":\"fb6d5848\",\"数据与算法_剑指offer系列_55-ii.平衡二叉树.md\":\"b6bc2e26\",\"数据与算法_剑指offer系列_56-i.数组中数字出现的次数.md\":\"e7807767\",\"数据与算法_剑指offer系列_58-i.翻转单词顺序.md\":\"a6243762\",\"数据与算法_剑指offer系列_58.左旋转字符串.md\":\"1117dbcd\",\"数据与算法_剑指offer系列_59-i.滑动窗口的最大值.md\":\"e9949c91\",\"数据与算法_剑指offer系列_59-ii.队列的最大值.md\":\"87cafe4a\",\"数据与算法_剑指offer系列_61.扑克牌中的顺子.md\":\"ec641552\",\"数据与算法_剑指offer系列_62.圆圈中最后剩下的数字.md\":\"61ddb85a\",\"数据与算法_剑指offer系列_65.不用加减乘除做加法.md\":\"6dc4df9f\",\"数据与算法_剑指offer系列_66.构建乘积数组.md\":\"77f9ca1c\",\"数据与算法_剑指offer系列_68-i.二叉搜索树的最近公共祖先.md\":\"44e691c7\",\"数据与算法_字节校园66题_124.二叉树中的最大路径和.md\":\"10e74fc3\",\"数据与算法_字节校园66题_128.最长连续序列.md\":\"4158624e\",\"数据与算法_字节校园66题_14.最长公共前缀.md\":\"e94ab67d\",\"数据与算法_字节校园66题_146.lru 缓存.md\":\"1e3dd6dd\",\"数据与算法_字节校园66题_152.乘积最大子数组.md\":\"5b64b779\",\"数据与算法_字节校园66题_215.数组中的第k的最大元素.md\":\"0b7d9808\",\"数据与算法_字节校园66题_23.合并k个升序链表.md\":\"fd03985b\",\"数据与算法_字节校园66题_236.二叉树的最近公共祖先.md\":\"6e68f0eb\",\"数据与算法_字节校园66题_25.k个一组翻转链表.md\":\"513483b4\",\"数据与算法_字节校园66题_31.下一个排列.md\":\"74c20ff9\",\"数据与算法_字节校园66题_33.搜索旋转排序数组.md\":\"938a8950\",\"数据与算法_字节校园66题_394.字符串解码.md\":\"1293a042\",\"数据与算法_字节校园66题_41.缺失的第一个正数.md\":\"e1fffe8e\",\"数据与算法_字节校园66题_5.最长回文子串.md\":\"43124f42\",\"数据与算法_字节校园66题_7.整数反转.md\":\"be167b10\",\"数据与算法_字节校园66题_bytedance-002.发下午茶.md\":\"13f827dd\",\"数据与算法_字节校园66题_bytedance-006.夏季特惠.md\":\"19ef477e\",\"数据与算法_字节校园66题_bytedance-010.数组组成最大数.md\":\"4afbf4e5\",\"数据与算法_字节校园66题_bytedance-016.最短移动距离.md\":\"5fa848ba\",\"数据与算法_字节校园66题_机器人跳跃问题.md\":\"79d9827d\",\"数据与算法_排序_0.index.md\":\"7c5ae6f0\",\"数据与算法_排序_1.bubble.md\":\"8350e1b8\",\"数据与算法_排序_2.quick.md\":\"cea510ba\",\"数据与算法_排序_3.insert.md\":\"27ab1ebe\",\"数据与算法_数据结构_1.栈队列.md\":\"4b18b765\",\"数据与算法_数据结构_2.数组链表.md\":\"f59100aa\",\"数据与算法_数据结构_3.二叉树.md\":\"b3ee8a23\",\"数据与算法_栈_20.有效的括号.md\":\"c429b46a\",\"数据与算法_栈_232.用栈实现队列.md\":\"bafec2d7\",\"数据与算法_栈_682.棒球比赛.md\":\"550d56cd\",\"数据与算法_栈_844.比较含退格的字符串.md\":\"a191f44b\",\"数据与算法_算法基础_kmp算法.md\":\"53b8b172\",\"数据与算法_算法基础_二叉树_⛄️ 基础知识.md\":\"8f8daea5\",\"数据与算法_算法基础_二叉树_完全二叉树的结点数.md\":\"bec620ae\",\"数据与算法_算法基础_二叉树_层序遍历.md\":\"4274e298\",\"数据与算法_算法基础_二叉树_是否是平衡树.md\":\"35ed9ce4\",\"数据与算法_算法基础_二叉树_最小深度.md\":\"c9aa5890\",\"数据与算法_算法基础_二叉树_迭代遍历.md\":\"eeda37a2\",\"数据与算法_算法基础_二叉树_递归遍历.md\":\"962f71f6\",\"数据与算法_算法基础_动态规划_⛄️ 基础.md\":\"52665048\",\"数据与算法_算法基础_动态规划_不同的二叉搜索树.md\":\"fb9b29f2\",\"数据与算法_算法基础_动态规划_不同路径.md\":\"4895b3f6\",\"数据与算法_算法基础_动态规划_不同路径ii.md\":\"985535fa\",\"数据与算法_算法基础_动态规划_整数拆分.md\":\"6c33ec2c\",\"数据与算法_算法基础_动态规划_最后一块石头的重量.md\":\"3e074682\",\"数据与算法_算法基础_动态规划_最小消费爬楼梯.md\":\"f2b9f529\",\"数据与算法_算法基础_动态规划_爬楼梯.md\":\"623c25f5\",\"数据与算法_算法基础_动态规划_🎒 背包问题.md\":\"c4e7a541\",\"数据与算法_算法基础_单调栈_下一个更大元素(i).md\":\"6573403d\",\"数据与算法_算法基础_单调栈_下一个更大元素(ii).md\":\"eaddf4f8\",\"数据与算法_算法基础_单调栈_接雨水.md\":\"08dc788a\",\"数据与算法_算法基础_单调栈_每日温度.md\":\"168f85a0\",\"数据与算法_算法基础_双指针_三数之和.md\":\"fdc999c2\",\"数据与算法_算法基础_回溯算法_重新安排行程.md\":\"3b5e2bb9\",\"数据与算法_算法基础_排序_优先队列.md\":\"7cb6d95e\",\"数据与算法_算法基础_排序_基础.md\":\"f7a3ca41\",\"数据与算法_算法基础_排序_希尔排序.md\":\"a31215e3\",\"数据与算法_算法基础_排序_归并排序.md\":\"a4036e1c\",\"数据与算法_算法基础_排序_快速排序.md\":\"5cacf966\",\"数据与算法_算法基础_排序_插入排序.md\":\"b4f729f9\",\"数据与算法_算法基础_排序_桶排序.md\":\"2e7096b3\",\"数据与算法_算法基础_排序_选择排序.md\":\"2dae4ff1\",\"数据与算法_算法基础_排序算法.md\":\"53b3a4c0\",\"数据与算法_算法基础_数组_☃️ 基础知识.md\":\"5916f1f2\",\"数据与算法_算法基础_数组_二分查找.md\":\"081bda50\",\"数据与算法_算法基础_数组_有序数组的平方.md\":\"c71559ae\",\"数据与算法_算法基础_数组_移除元素.md\":\"323d5f7d\",\"数据与算法_算法基础_数组_螺旋矩阵ii.md\":\"085b880f\",\"数据与算法_算法基础_数组_长度最小的子数组.md\":\"1b81b64c\",\"数据与算法_算法基础_栈_有效的括号字符串.md\":\"35420491\",\"数据与算法_算法基础_栈_栈.md\":\"82c37d75\",\"数据与算法_算法基础_树.md\":\"b1cf2d2a\",\"数据与算法_算法基础_概述.md\":\"f4a51317\",\"数据与算法_算法基础_稀疏数组.md\":\"e88d0e05\",\"数据与算法_算法基础_算法性能分析.md\":\"4fa2a85a\",\"数据与算法_算法基础_贪心算法.md\":\"26bccd3d\",\"数据与算法_算法基础_递归.md\":\"df5f6a6d\",\"数据与算法_算法基础_链表_⛄️ 基础知识.md\":\"b6e3a602\",\"数据与算法_算法基础_链表_两两交换链表中的节点.md\":\"1803dbce\",\"数据与算法_算法基础_链表_删除链表的倒数第n个节点.md\":\"b4062366\",\"数据与算法_算法基础_链表_反转链表.md\":\"1e16fbba\",\"数据与算法_算法基础_链表_环型链表ii.md\":\"a7d9bf72\",\"数据与算法_算法基础_链表_移除链表元素.md\":\"37555c31\",\"数据与算法_算法基础_链表_设计链表.md\":\"d3d8f5ad\",\"数据与算法_算法基础_链表_链表相交.md\":\"bd9afb56\",\"数据与算法_算法基础_队列（数组实现）.md\":\"f86f1479\",\"数据与算法_链表_141.环形链表.md\":\"d51d949a\",\"数据与算法_链表_19.删除链表的倒数第n个结点.md\":\"4ef7fe6f\",\"数据与算法_链表_206.反转链表.md\":\"b75771dd\",\"数据与算法_链表_21.合并两个有序链表.md\":\"12d0bf99\",\"数据与算法_链表_876.链表的中间结点.md\":\"cb16513d\",\"设计模式_01.创建型模式_01.单例模式.md\":\"e4e1e487\",\"设计模式_01.创建型模式_02.工厂模式.md\":\"b0bb38ea\",\"设计模式_01.创建型模式_03.抽象工厂模式.md\":\"530fd299\",\"设计模式_02.结构型模式_01.享元模式.md\":\"15f99078\",\"设计模式_02.结构型模式_02.代理模式.md\":\"8ca77422\",\"设计模式_02.结构型模式_03.桥接模式.md\":\"5d6d98a9\",\"设计模式_02.结构型模式_04.组合模式.md\":\"c4c4355c\",\"设计模式_02.结构型模式_05.装饰者模式.md\":\"915ef4f2\",\"设计模式_02.结构型模式_06.适配器模式.md\":\"024a9557\",\"设计模式_03.行为型模式_01.命令模式.md\":\"78b05e99\",\"设计模式_03.行为型模式_02.备忘录模式.md\":\"79c38f57\",\"设计模式_03.行为型模式_03.模板模式.md\":\"4b226dc0\",\"设计模式_03.行为型模式_04.状态模式.md\":\"776a5147\",\"设计模式_03.行为型模式_05.策略模式.md\":\"2db84047\",\"设计模式_03.行为型模式_06.解释器模式.md\":\"dc4cfb2c\",\"设计模式_03.行为型模式_07.订阅-发布模式.md\":\"aa41d6ff\",\"设计模式_03.行为型模式_08.责任链模式.md\":\"10c6e60d\",\"设计模式_03.行为型模式_09.迭代器模式.md\":\"6b93d9fb\",\"设计模式_readme.md\":\"0981793f\",\"面试题库_字节青训营_html.md\":\"e205b3f4\",\"面试题库_字节青训营_http.md\":\"b4b69472\",\"面试题库_字节青训营_nodejs.md\":\"5de96acd\",\"面试题库_字节青训营_webgl基础.md\":\"000a690f\",\"面试题库_字节青训营_webpack知识体系.md\":\"9167cfbf\",\"面试题库_字节青训营_web安全.md\":\"5da9b9c7\",\"面试题库_字节青训营_web标准与前端开发.md\":\"b8b1910f\",\"面试题库_字节青训营_前端动画实现.md\":\"fb7ea89c\",\"面试题库_字节青训营_前端调试知识.md\":\"b3c0af6e\",\"面试题库_字节青训营_响应式系统与react.md\":\"1ede342f\",\"面试题库_字节青训营_多媒体入门.md\":\"84f7419c\",\"面试题库_字节青训营_如何写好javascript.md\":\"4a1a7a87\",\"面试题库_字节青训营_小游戏开发.md\":\"17f0ac52\",\"面试题库_字节青训营_深入css.md\":\"9ca37122\",\"面试题库_手写题整理_css-三栏布局.md\":\"e34967a7\",\"面试题库_手写题整理_css-垂直水平布局.md\":\"f265cc19\",\"面试题库_手写题整理_css-实现三角形.md\":\"396474ab\",\"面试题库_手写题整理_css-实现等宽高比矩形.md\":\"14e22992\",\"面试题库_手写题整理_dom-dom相关.md\":\"fc1997e8\",\"面试题库_手写题整理_js-function相关函数实现.md\":\"f94e11fe\",\"面试题库_手写题整理_js-object相关.md\":\"ea8c8561\",\"面试题库_手写题整理_js-promise.md\":\"a38c67b6\",\"面试题库_手写题整理_js-string相关.md\":\"b318cf5b\",\"面试题库_手写题整理_js-once函数.md\":\"fb1e3f40\",\"面试题库_手写题整理_js-延时函数实现.md\":\"f5331471\",\"面试题库_手写题整理_js-数组相关.md\":\"b7141bcc\",\"面试题库_手写题整理_js-深浅拷贝.md\":\"82cb3edb\",\"面试题库_手写题整理_js-继承方式.md\":\"0bcc5b2d\",\"面试题库_手写题整理_js-防抖和节流.md\":\"66a0a6b9\",\"面试题库_输出题目_promise.md\":\"6e5a4290\",\"面试题库_输出题目_this指向.md\":\"efa0ecf2\",\"面试题库_输出题目_综合题目.md\":\"6a4f44d2\",\"面试题库_面经整理_2022.10.12kk综合面.md\":\"feff2ccf\",\"面试题库_面经整理_2022.10.13cvte技术二面.md\":\"b2f6d7e6\",\"面试题库_面经整理_2022.10.18东方海外技术面.md\":\"55cb8ba2\",\"面试题库_面经整理_2022.10.24虎彩复试.md\":\"3a539361\",\"面试题库_面经整理_2022.10.9kk集团技术面.md\":\"8dacc81c\",\"面试题库_面经整理_2022.4.10字节飞书笔试.md\":\"99b0d86d\",\"面试题库_面经整理_2022.4.28字节深圳飞书实习一面.md\":\"ac7f2b54\",\"面试题库_面经整理_2022.5.23字节深圳飞书实习三面.md\":\"e89559ea\",\"面试题库_面经整理_2022.5.9字节深圳飞书实习二面.md\":\"d7eabb32\",\"面试题库_面经整理_2022.7.7西门子面试准备.md\":\"456bcaa1\",\"面试题库_面经整理_2022.8.21字节笔试.md\":\"7a62c352\",\"面试题库_面经整理_2022.8.31 cvte笔试.md\":\"f36e5da4\",\"面试题库_面经整理_2022.9.19小红书笔试.md\":\"9457adc1\",\"面试题库_面经整理_2022.9.1字节飞书北京一面.md\":\"4d04df16\",\"面试题库_面经整理_2022.9.1滴滴笔试.md\":\"e758453c\",\"面试题库_面经整理_2022.9.25东方海外笔试.md\":\"8c3b883a\",\"面试题库_面经整理_2022.9.25小红书笔试.md\":\"bfaec6c2\",\"面试题库_面经整理_2022.9.30cvte技术面.md\":\"494d8b18\",\"面试题库_面经整理_2022.9.3美团笔试.md\":\"887aff7a\",\"面试题库_面经整理_2022.9.8字节成都运维开发一面.md\":\"8b32f409\",\"面试题库_面经整理_2022.9.9字节成都运维开发二面.md\":\"ef00ceec\",\"面试题库_题目整理_css专题.md\":\"87d68cde\",\"面试题库_题目整理_hr面试.md\":\"b7d74432\",\"面试题库_题目整理_javascript基础.md\":\"ddd17571\",\"面试题库_题目整理_typescript专题.md\":\"5de0223c\",\"面试题库_题目整理_vue专题.md\":\"4348f29d\",\"面试题库_题目整理_反问.md\":\"57492d22\",\"面试题库_题目整理_常见问题.md\":\"29058124\",\"面试题库_题目整理_智力题.md\":\"cec3eea6\"}")</script>
    <script type="module" async src="/assets/app.31720a63.js"></script>
    
  </body>
</html>